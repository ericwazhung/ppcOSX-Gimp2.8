<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>3.9. Unsharp Mask</title>
    <link rel="stylesheet" href="gimp-help-plain.css" type="text/css" />
    <link rel="stylesheet" href="gimp-help-screen.css" type="text/css" />
    <link rel="stylesheet" href="gimp-help-custom.css" type="text/css" />
    <link rel="alternate stylesheet" href="gimp22.css" type="text/css" title="gimp22" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.76.1" />
    <link rel="home" href="index.html" title="GNU Image Manipulation Program" />
    <link rel="up" href="filters-enhance.html" title="3. Enhance Filters" />
    <link rel="prev" href="plug-in-sharpen.html" title="3.8. Sharpen" />
    <link rel="next" href="filters-distort.html" title="4. Distort Filters" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">3.9. Unsharp Mask</th>
        </tr>
        <tr>
          <td width="20%" align="left">
            <a accesskey="p" href="plug-in-sharpen.html">
              <img src="images/prev.png" alt="Prev" />
            </a>
          </td>
          <th width="60%" align="center">3. Enhance Filters</th>
          <td width="20%" align="right"> <a accesskey="n" href="filters-distort.html"><img src="images/next.png" alt="Next" /></a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="sect2" title="3.9. Unsharp Mask">
      <div class="titlepage">
        <div>
          <div>
            <h3 class="title"><a id="plug-in-unsharp-mask"></a>3.9. Unsharp Mask</h3>
          </div>
        </div>
      </div>
      <a id="idp21693744" class="indexterm"></a>
      <a id="idp21681312" class="indexterm"></a>
      <div class="sect3" title="3.9.1. Overview">
        <div class="titlepage">
          <div>
            <div>
              <h4 class="title"><a id="idp14841712"></a>3.9.1. Overview</h4>
            </div>
          </div>
        </div>
        <div class="figure">
          <a id="idp20647312"></a>
          <p class="title">
            <strong>Figure 17.31. Applying example for the Unsharp Mask filter</strong>
          </p>
          <div class="figure-contents">
            <div class="mediaobject">
              <img src="images/filters/examples/taj_orig.jpg" alt="Applying example for the Unsharp Mask filter" />
              <div class="caption">
                <p>Original image</p>
              </div>
            </div>
            <div class="mediaobject">
              <img src="images/filters/examples/enhance-taj-unsharp-mask.jpg" alt="Applying example for the Unsharp Mask filter" />
              <div class="caption">
                <p>Filter <span class="quote">“<span class="quote">Unsharp mask</span>”</span> applied</p>
              </div>
            </div>
          </div>
        </div>
        <br class="figure-break" />
        <p>
      Out-of-focus photographs and most digitized images often need a
      sharpness correction. This is due to the digitizing process that must
      chop a color continuum up in points with slightly different colors:
      elements thinner than sampling frequency will be averaged into an
      uniform color. So sharp borders are rendered a little blurred. The same
      phenomenon appears when printing color dots on paper.
    </p>
        <p>
      The Unsharp Mask filter (what an odd name!) sharpens edges of the
      elements without increasing noise or blemish. It is the king of the
      sharpen filters.
    </p>
        <div class="tip" title="Tip" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Tip">
            <tr>
              <td rowspan="2" align="center" valign="top" width="25">
                <img alt="[Tip]" src="images/tip.png" />
              </td>
              <th align="left">Tip</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>
        Some imaging devices like digital cameras or scanners offer to sharpen
        the created images for you. We strongly recommend you disable the
        sharpening in this devices and use the GIMP filters instead. This way
        you regain the full control over the sharpening of your images.
      </p>
              </td>
            </tr>
          </table>
        </div>
        <p>
      To prevent color distortion while sharpening, Decompose your image to
      HSV and work only on Value. Then Compose the image to HSV. Go to
      <span class="guimenu">Colors</span> → <span class="guisubmenu">Components</span> → <span class="guimenuitem">Decompose...</span>.
      Make sure the <span class="guilabel">Decompose to Layers</span>
      box is checked. Choose HSV and click OK. You will get a new grey-level
      image with three layers, one for Hue, one for Saturation, and one for
      Value. (Close the original image so you won't get confused). Select
      the Value layer and apply your sharpening to it. When you are done,
      with that same layer selected, reverse the process. Go to
      <span class="guimenu">Colors</span> → <span class="guisubmenu">Components</span> → <span class="guimenuitem">Compose...</span>.
      Again choose HSV and click OK. You will get back your original image
      except that it will have been sharpened in the Value component.
    </p>
      </div>
      <div class="sect3" title="3.9.2. Activating the filter">
        <div class="titlepage">
          <div>
            <div>
              <h4 class="title"><a id="idp16571360"></a>3.9.2. Activating the filter</h4>
            </div>
          </div>
        </div>
        <p>
      You can find this filter through
      <span class="guimenu">Filters</span> → <span class="guisubmenu">Enhance</span> → <span class="guimenuitem">Unsharp Mask</span>.
    </p>
      </div>
      <div class="sect3" title="3.9.3. Options">
        <div class="titlepage">
          <div>
            <div>
              <h4 class="title"><a id="idp14367856"></a>3.9.3. Options</h4>
            </div>
          </div>
        </div>
        <div class="figure">
          <a id="idp15860016"></a>
          <p class="title">
            <strong>Figure 17.32. <span class="quote">“<span class="quote">Unsharp Mask</span>”</span> filter options</strong>
          </p>
          <div class="figure-contents">
            <div class="mediaobject">
              <img src="images/filters/enhance/unsharp-mask.png" alt="Unsharp Mask filter options" />
            </div>
          </div>
        </div>
        <br class="figure-break" />
        <div class="variablelist">
          <dl>
            <dt>
              <span class="term">Preview</span>
            </dt>
            <dd>
              <p>
            If checked, parameter setting results are interactively displayed
            in preview. Scroll bars allow you to move around the image.
          </p>
            </dd>
            <dt>
              <span class="term">Radius</span>
            </dt>
            <dd>
              <p>
            The slider and input boxes (0.1-120) allow you to set how many
            pixels on either side of an edge will be affected by sharpening.
            High resolution images allow higher radius. It is better to always
            sharpen an image at its final resolution.
          </p>
            </dd>
            <dt>
              <span class="term">Amount</span>
            </dt>
            <dd>
              <p>
            This slider and input boxes (0.00-5.00) allow you to set
            strength of sharpening.
          </p>
            </dd>
            <dt>
              <span class="term">Threshold</span>
            </dt>
            <dd>
              <p>
            This slider and input boxes (0-255) allow you to set the minimum
            difference in pixel values that indicates an edge where sharpen
            must be applied. So you can protect areas of smooth tonal
            transition from sharpening, and avoid creation of blemishes in
            face, sky or water surface.
          </p>
            </dd>
          </dl>
        </div>
      </div>
      <div class="sect3" title="3.9.4. How does an unsharp mask work?">
        <div class="titlepage">
          <div>
            <div>
              <h4 class="title"><a id="idp13265280"></a>3.9.4. How does an unsharp mask work?</h4>
            </div>
          </div>
        </div>
        <p>
      Using an unsharp mask to sharpen an image can seem rather weird. Here is
      the explanation:
    </p>
        <p>
      Think of an image with a contrast in some place. The intensity curve of
      the pixels on a line going through this contrast will show an abrupt
      increase of intensity: like a stair if contrast is perfectly sharp, like
      an S if there is some blur.
    </p>
        <div class="mediaobject">
          <img src="images/filters/examples/unsharp-mask-1.png" />
        </div>
        <p>
      Now, we have an image with some blur we want to sharpen (black curve).
      We apply some more blur: the intensity variation will be more gradual
      (green curve).
    </p>
        <p>
      Let us subtract the blurredness intensity from the intensity of the
      image. We get the red curve, which is more abrupt : contrast and
      sharpness are increased. QED.
    </p>
        <div class="mediaobject">
          <img src="images/filters/examples/unsharp-mask-2.png" />
        </div>
        <p>
      Unsharp mask has first been used in silver photography. The photograph
      first creates a copy of the original negative by contact, on a film,
      placing a thin glass plate between both; that will produce a blurred
      copy because of light diffusion. Then he places both films, exactly
      corresponding, in a photo enlarger, to reproduce them on paper. The dark
      areas of the positive blurred film, opposed to the clear areas of the
      original negative will prevent light to go through and so will be
      subtracted from the light going through the original film.
    </p>
        <div class="procedure">
          <p>
        In digital photography, with GIMP, you will go through the following
        steps:
      </p>
          <ol class="procedure" type="1">
            <li class="step" title="Step 1">
              <p>
          Open your image and duplicate it
          <span class="guimenu">Image</span> → <span class="guimenuitem">Duplicate</span>
        </p>
            </li>
            <li class="step" title="Step 2">
              <p>
          In the copy, duplicate the layer
          <span class="guimenu">Layer</span> → <span class="guimenuitem">Duplicate layer</span>, then drop the Filters menu down and apply
          <span class="guimenu">Blur</span> → <span class="guimenuitem">Gaussian Blur</span>
          to the duplicated layer with the default IIR option and radius 5.
        </p>
            </li>
            <li class="step" title="Step 3">
              <p>
          In the layer dialog of the duplicated image, change Mode to
          <span class="quote">“<span class="quote">Subtract</span>”</span>, and in the right-clic menu, select
          <span class="quote">“<span class="quote">Merge down</span>”</span>.
        </p>
            </li>
            <li class="step" title="Step 4">
              <p>
          Click and drag the only layer you got into the original image, where
          it appears as a new layer.
        </p>
            </li>
            <li class="step" title="Step 5">
              <p>
          Change the Mode in this layer dialog to <span class="quote">“<span class="quote">Addition</span>”</span>.
        </p>
            </li>
          </ol>
        </div>
        <p>
      Voilà. The <span class="quote">“<span class="quote">Unsharp Mask</span>”</span> plug-in does the same for you.
    </p>
        <p>
      At the beginning of the curve, you can see a dip. If blurring is
      important, this dip is very deep; the result of the subtraction can be
      negative, and a complementary color stripe will appear along the
      contrast, or a black halo around a star on the light background of a
      nebula (black eye effect).
    </p>
        <div class="figure">
          <a id="idp14134784"></a>
          <p class="title">
            <strong>Figure 17.33. Black eye effect</strong>
          </p>
          <div class="figure-contents">
            <div class="mediaobject">
              <img src="images/filters/examples/unsharp-mask-3.png" alt="Black eye effect" />
            </div>
          </div>
        </div>
        <br class="figure-break" />
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="plug-in-sharpen.html"><img src="images/prev.png" alt="Prev" /></a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="filters-enhance.html">
              <img src="images/up.png" alt="Up" />
            </a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="filters-distort.html"><img src="images/next.png" alt="Next" /></a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top"><a accesskey="p" href="plug-in-sharpen.html">3.8. Sharpen</a> </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">
              <img src="images/home.png" alt="Home" />
            </a>
          </td>
          <td width="40%" align="right" valign="top"> <a accesskey="n" href="filters-distort.html">4. Distort Filters</a></td>
        </tr>
      </table>
    </div>
  </body>
</html>
